@import url('https://fonts.googleapis.com/css2?family=Cinzel&family=Lora&display=swap');

:root {
  --slot-size: 160px;
  --image-badge-offset: 2px;

  /* Paleta medieval */
  --brown-700: #5a3825;
  --parchment-100: #fff8e5;

  /* Rojos */
  --red-600: #6c1f1f;
  --red-500: #912f2f;
  --red-300: #d46a6a;
  --red-400: #a94444;

  /* Amarillos */
  --yellow-600: #b28d25;
  --yellow-500: #d4af37;
  --yellow-300: #f5e27f;
  --yellow-400: #d9c25a;

  /* Azules / Celeste */
  --blue-500: #4a91c2;
  --blue-300: #6db7e6;

  /* Verdes */
  --green-600: #2a4026;
  --green-500: #3e5c3a;
}

html, body {
  min-height: 100vh;
  height: auto;
  margin: 0;
}

html {
  overflow-y: scroll;
}

body {
  font-family: 'Lora', serif;
  padding: 20px;
  background: url('src/Background.png') center/cover no-repeat fixed;
  display: flex;
  flex-direction: column;
  user-select: none;
}

.app {
  display: flex;
  gap: 20px;
  min-height: calc(100vh - 40px);
}

.content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.virtual-section {
  content-visibility: auto;
  contain-intrinsic-size: 1000px 800px;
}

body.login-view {
  justify-content: center;
  align-items: center;
}

h1, h2, h3, h4, h5, h6, .title {
  font-family: 'Cinzel', serif;
}

input, textarea {
  user-select: text;
}

/* hide main sections until JS initializes */
body.loading .header,
body.loading .sidebar,
body.loading .content section {
  display: none;
}

#login-container {
  max-width: 400px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
}

#login-container form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 20px;
}

#login-container h2,
#login-container h3 {
  text-align: center;
}

#login-container label {
  display: flex;
  flex-direction: column;
  font-weight: bold;
}

#login-container input {
  width: 100%;
  box-sizing: border-box;
  padding: 6px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

#offline-enter-btn {
  display: block;
  margin: 10px auto;
}

.game-title {
  font-weight: 700;
  font-size: 2em;
  margin-bottom: 4px;
  user-select: none;
}

.header {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 10px;
  align-items: center;
  justify-items: center;
  background: var(--parchment-100);
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 0 8px rgba(0,0,0,0.1);
  font-weight: bold;
  font-size: 1.1em;
  border: 5px solid var(--yellow-500);
  box-sizing: border-box;
}

.header-button {
  padding: 4px 6px;
  font-size: 0.9em;
  border-radius: 8px;
  white-space: nowrap;
  width: auto;
}

.header > div {
  font-weight: normal;
  font-size: 1.2em;
  user-select: none;
  text-align: center;
}
.header #resources-grid {
  grid-column: span 8;
  justify-self: stretch;
}

.resources-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px 12px;
  align-items:center;
}
.resources-grid .res{
  display:flex;
  align-items:center;
  gap:6px;
  min-width:0;
  white-space:nowrap;
}

/* En pantallas muy anchas, mantenemos 2 columnas (ya no deja hueco a la derecha). 
   Si prefieres que cada recurso “ocupe dos columnas” de una grilla más grande, usa este modo: */
@media (min-width: 1100px){
  .resources-grid{
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
  /* Cada recurso ocupa 2 columnas => quedan 2 por fila igualmente */
  .resources-grid .res{ grid-column: span 2; }
}
.header-column {
  display: flex;
  flex-direction: column;
  line-height: 1;
}

#share-wrap {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 6px;
  line-height: 1;
  margin-right: 20px;
}

#share-status {
  font-size: 0.9em;
  margin-top: 4px;
}


.card {
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  background-color: var(--parchment-100) !important;
  border: 5px solid var(--yellow-500);
  box-sizing: border-box;
  position: relative;
}

.hero-card,
.villain-card,
.pet-card,
.ability-card,
.card {
  background-color: var(--parchment-100) !important;
  border: 5px solid var(--yellow-500);
  box-sizing: border-box;
}

.gold-border {
  border: 2px solid #d4af37;
}

.public-profile-card {
  margin-bottom: 6px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.public-profile-card button {
  flex: 1;
}

.header-column div {
  font-size: 1.0em;
}

#citizens-display::before {
  content: "\1F9D1\0020"; /* person */
}
#soldiers-display::before {
  content: "\2694\FE0F\0020"; /* crossed swords */
}

#houses-display::before {
  content: "\1F3E0\0020"; /* house */
}
#terrain-display::before {
  content: "\26F0\FE0F\0020"; /* mountain */
}

.hero {
  background-color: var(--parchment-100);
  padding: 10px 20px 10px 10px;
  border-radius: 10px;
  margin-bottom: 4px;
  display: grid;
  grid-template-columns: 130px 1fr 1fr;
  align-items: start;
  gap: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  position: relative;
  border: 5px solid var(--yellow-500);
  box-sizing: border-box;
}

.chief-card {
  min-height: 180px;
  margin-bottom: 0;
  display: grid;
  grid-template-columns: 80px repeat(auto-fit, minmax(120px, 1fr));
  align-items: stretch;
  gap: 5px;
  position: relative;
  padding-bottom: 0;
  overflow-x: auto;
  overflow-y: visible;
  box-sizing: border-box;
}

.chief-card.progress-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

#terrain-card-2 {
  padding-bottom: 15px;
}

#terrain-card.chief-card.card,
#games-card.chief-card.card,
#tutorial-buttons.chief-card.card,
#save-images-card.chief-card.card,
#tutorial-info-card.chief-card.card {
  padding-bottom: 15px;
}

.construction-card {
  padding-bottom: 20px;
}

#chief-extra {
  min-height: 60px;
  grid-template-columns: 1fr;
  position: relative;
}

.avatar {
  position: relative;
  width: 80px;
  height: 80px;
  max-width: 128px;
  max-height: 128px;
  object-fit: cover;
  border-radius: 50%;
  border: 5px solid var(--yellow-500);
  cursor: pointer;
  user-select: none;
}
.avatar-wrap {
  position: relative;
  display: inline-block;
  overflow: hidden;
}
.hero .avatar {
  margin-top: 6px;
  width: 130px;
  height: 170px;
  max-width: 130px;
  max-height: 170px;
  border-radius: 12px;
}
.modal-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
}
.modal-avatar.empty {
  background: #eee;
  border-radius: 50%;
  border: 1px dashed #999;
}
.avatar.empty {
  background: #eee;
}

.pet-avatar {
  width: 80px;
  height: 80px;
  max-width: 128px;
  max-height: 128px;
  object-fit: cover;
  border-radius: 8px;
  border: 2px solid #ccc;
  cursor: pointer;
  user-select: none;
}

.pet-resource-icons {
  position: absolute;
  bottom: 4px;
  right: 4px;
  display: flex;
  gap: 2px;
  z-index: 6;
  animation: fadeIn 0.4s;
}

.pet-resource-icon {
  position: relative;
  width: 24px;
  height: 24px;
  background: #c49a6c;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 20px;
  line-height: 24px;
}
.pet-resource-icon:hover {
  filter: brightness(1.2);
}
.pet-resource-count {
  position: absolute;
  bottom: -4px;
  right: -4px;
  background: rgba(0,0,0,0.7);
  color: #fff;
  border-radius: 8px;
  padding: 0 2px;
  font-size: 12px;
  line-height: 12px;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
#pets {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

#villains {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

  @media (max-width: 600px) {
    #pets {
      grid-template-columns: 1fr;
    }
    #villains {
      grid-template-columns: 1fr;
    }
  }
#pets-section {
  position: relative;
}
#pets-section .pet-avatar,
#pets-section .avatar {
  width: 120px;
  height: 120px;
  max-width: none;
  max-height: none;
}
.pet-avatar.empty {
  background: #eee;
}

.pet-card {
  grid-template-columns: 80px auto 130px auto;
  gap: 6px;
}
#pets-section .pet-card {
  grid-template-columns: 160px auto 160px auto;
  gap: 6px;
}

.chief-avatar {
  margin-right: 8px;
  margin-top: 6px;
  width: 240px;
  height: 240px;
  max-width: none;
  max-height: none;
  border-radius: 12px;
  border: 2px solid #d4af37;
}
.chief-avatar-col {
  display: flex;
  flex-direction: column;
  align-items: center;
}
.chief-name {
  text-align: center;
  font-weight: bold;
}
.chief-level {
  text-align: center;
  font-size: 0.9em;
}

.info-section {
  user-select: none;
  font-size: 0.9em;
  line-height: 1.3em;
  max-width: none;
  word-break: break-word;
}

.chief-card .info-section {
  padding-left: 8px;
  padding-top: 16px;
}

.btn {
  padding: 12px 28px;
  font-size: 16px;
  font-weight: bold;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease;
  box-shadow: 0 4px 0 rgba(0,0,0,0.25), 0 8px 16px rgba(0,0,0,0.15);
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-small {
  padding: 6px 12px;
  font-size: 14px;
}

.ability-learn-btn {
  padding: 4px 8px;
}

.btn:hover {
  filter: brightness(1.03);
}

.btn:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 rgba(0,0,0,0.2), 0 4px 8px rgba(0,0,0,0.12);
}

/* 🟥 Rojo (fuerte) */
.btn-red,
.btn-rojo {
  background: linear-gradient(145deg, var(--red-500), var(--red-600));
  color: #fbeaea;
}

/* 🩸 Rojo claro */
.btn-lightred,
.btn-rojo-claro {
  background: linear-gradient(145deg, var(--red-300), var(--red-400));
  color: #fff0f0;
}

/* 🟨 Amarillo (fuerte / dorado) */
.btn-yellow,
.btn-amarillo,
.btn-gold {
  background: linear-gradient(145deg, var(--yellow-500), var(--yellow-600));
  color: #fffbe5;
}

/* 🟨 Amarillo claro */
.btn-lightyellow,
.btn-amarillo-claro {
  background: linear-gradient(145deg, var(--yellow-300), var(--yellow-400));
  color: #4b3d00;
}

/* 🔵 Azul */
.btn-blue,
.btn-azul {
  background: linear-gradient(145deg, var(--blue-300), var(--blue-500));
  color: #e8f6ff;
}

/* 🌤️ Celeste */
.btn-celeste {
  background: linear-gradient(145deg, #8fcdf0, var(--blue-300));
  color: #f3fbff;
}

/* 🌿 Verde */
.btn-green,
.btn-verde,
.btn-forest {
  background: linear-gradient(145deg, var(--green-500), var(--green-600));
  color: #e9f4e8;
}

.white-text {
  color: #fff;
}

.white-bold {
  color: #fff;
  font-weight: bold;
}

.btn:disabled {
  background: #999;
  cursor: not-allowed;
  box-shadow: none;
  filter: none;
}

#summon-btn:not(:disabled),
#citizen-btn:not(:disabled),
#soldier-btn:not(:disabled),
#promote-btn:not(:disabled),
#familiar-btn:not(:disabled),
#ability-btn:not(:disabled) {
  box-shadow: none;
}

#summon-btn {
  margin-right: 5px;
  padding-left: 10px;
  padding-right: 10px;
  flex: 1;
  min-width: 0;
}

.action-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 110px;
}

.action-block button {
  width: 100%;
}

.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: flex-start;
  width: 100%;
}
.hero-actions .btn,
#villains .btn,
#pets .btn {
}

.hero-actions .action-block {
  flex: 0 0 110px;
}

.chief-action-col {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-left: 10px;
  padding-left: 10px;
  height: 100%;
  gap: 4px;
}

.chief-action-col .btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 20px;
  width: 100%;
  position: relative;
}

.fortune-button {
  padding-left: 10px;
  padding-right: 10px;
  min-width: 130px;
  color: #fff;
}




.timer {
  font-size: 0.8em;
  color: #555;
  margin-top: 4px;
  user-select: none;
  height: 1em;
  line-height: 1em;
  text-align: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Timers de upgrade de construcciones */
div#upgrade-timer-Lumberyard.timer,
div#upgrade-timer-Quarry.timer,
div#upgrade-timer-Pantry.timer,
div#upgrade-timer-PetSanctuary.timer,
div#upgrade-timer-Tower.timer,
div#upgrade-timer-Castle.timer,
div#upgrade-timer-Dungeons.timer,
div#upgrade-timer-Hospital.timer {
  padding-bottom: 10px;
}

.auto-note {
  color: red;
  display: block;
  margin-top: 2px;
  padding-bottom: 0;
  font-weight: normal;
}

.stats {
  margin-top: 10px;
  background: #eef;
  padding: 10px;
  border-radius: 8px;
  font-size: 0.9em;
  display: none;
  grid-column: 1 / -1;
  position: relative;
}

.stats.expand-row {
  display: block;
}

.stat-line {
  display: grid;
  grid-template-columns: 120px 80px auto;
  gap: 6px;
  justify-items: start;
  align-items: center;
}

.stats-columns {
  display: grid;
  grid-template-columns: minmax(200px, 1.2fr) repeat(4, minmax(var(--slot-size), 1fr)) minmax(120px, 0.8fr);
  gap: 16px;
  align-items: start;
}

.stats-column {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  padding-right: 15px;
  min-width: 0;
}

.stats-column-title {
  font-weight: bold;
  margin-bottom: 4px;
}

.stats-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
}

.close-btn {
  position: absolute;
  top: 12px;
  right: 16px;
  background: none;
  border: none;
  font-size: 1.1em;
  font-weight: bold;
  color: #c00;
  cursor: pointer;
  z-index: 1000;
  pointer-events: auto;
}
.close-small {
  background: none;
  border: none;
  color: #c00;
  font-weight: bold;
  cursor: pointer;
  width: 12px;
  line-height: 1;
  padding: 0;
  margin-left: 2px;
  vertical-align: middle;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7em;
  position: relative;
  top: 2px;
}

.close-btn.close-small {
  top: 8px;
  right: 10px;
}

#auto-click-wrap .down-small,
#auto-click-wrap .close-small {
  width: 16px;
  font-size: 0.9em;
  top: 0;
}
.down-small {
  background: none;
  border: none;
  color: #090;
  font-weight: bold;
  cursor: pointer;
  width: 12px;
  line-height: 1;
  padding: 0;
  margin-left: 2px;
  vertical-align: middle;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7em;
  position: relative;
  top: 2px;
}
.minus-small {
  background: none;
  border: none;
  color: #090;
  font-weight: bold;
  cursor: pointer;
  width: 18px;
  line-height: 1;
  padding: 0;
  margin-left: 2px;
  vertical-align: middle;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1em;
  position: relative;
  top: 2px;
}
.sort-bar {
  display: flex;
  gap: 4px;
  margin-bottom: 4px;
}
.sort-bar button {
  flex: 1;
}

/* Advanced Pagination Bar */
.pagination-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4px;
  margin-top: 15px;
  padding: 12px;
  flex-wrap: wrap;
  background: #f8f9fa;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.pagination-btn {
  min-width: 32px;
  height: 32px;
  border: 1px solid #dee2e6;
  background: #fff;
  color: #495057;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 8px;
}

.pagination-btn:hover:not(:disabled):not(.active) {
  background: #e9ecef;
  border-color: #adb5bd;
  transform: translateY(-1px);
}

.pagination-btn:focus {
  outline: 2px solid #007bff;
  outline-offset: 2px;
}

.pagination-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.pagination-btn.active {
  background: #0056b3;
  color: #fff;
  border-color: #0056b3;
  font-weight: 600;
}

.pagination-btn-first,
.pagination-btn-last {
  font-weight: bold;
  min-width: 36px;
}

.pagination-btn-prev,
.pagination-btn-next {
  min-width: 40px;
}

.pagination-ellipsis {
  padding: 0 4px;
  color: #6c757d;
  font-weight: bold;
  user-select: none;
}

.pagination-info {
  font-weight: 600;
  color: #495057;
  margin: 0 8px;
  font-size: 14px;
}

.pagination-goto {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: 12px;
  padding-left: 12px;
  border-left: 1px solid #dee2e6;
}

.pagination-goto-label {
  font-size: 13px;
  color: #6c757d;
  font-weight: 500;
  white-space: nowrap;
}

.pagination-goto-input {
  width: 50px;
  height: 28px;
  border: 1px solid #ced4da;
  border-radius: 4px;
  text-align: center;
  font-size: 13px;
  padding: 0 4px;
}

.pagination-goto-input:focus {
  outline: 2px solid #007bff;
  outline-offset: 1px;
  border-color: #007bff;
}

/* Responsive Design */
@media (max-width: 768px) {
  .pagination-bar {
    gap: 2px;
    padding: 8px;
  }
  
  .pagination-btn {
    min-width: 28px;
    height: 28px;
    font-size: 12px;
    padding: 0 4px;
  }
  
  .pagination-btn-first,
  .pagination-btn-last {
    min-width: 32px;
  }
  
  .pagination-btn-prev,
  .pagination-btn-next {
    min-width: 36px;
  }
  
  .pagination-info {
    font-size: 12px;
    margin: 0 4px;
  }
  
  .pagination-goto {
    margin-left: 8px;
    padding-left: 8px;
  }
  
  .pagination-goto-label {
    font-size: 12px;
  }
  
  .pagination-goto-input {
    width: 40px;
    height: 24px;
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .pagination-bar {
    flex-direction: column;
    gap: 8px;
  }
  
  .pagination-goto {
    margin-left: 0;
    padding-left: 0;
    border-left: none;
    border-top: 1px solid #dee2e6;
    padding-top: 8px;
  }
  
  /* Hide page numbers on very small screens, keep only navigation */
  .pagination-btn-page {
    display: none;
  }
  
  .pagination-ellipsis {
    display: none;
  }
}
.small-desc {
  font-size: 0.8em;
  width: 100%;
  overflow: hidden;
  line-height: 1.2em;
  max-height: 3.6em;
}

.desc-preview {
  line-height: 1.2em;
  min-height: 3.6em;
}
.building-note {
  color: blue;
  font-weight: bold;
}
.learning-note {
  color: purple;
  font-weight: bold;
  display: block;
  margin-top: 2px;
}
.mission-note {
  color: green;
  font-weight: bold;
  display: block;
  margin-top: 2px;
}
.special-builder-note {
  color: orange;
  font-weight: bold;
  display: block;
  margin-top: 2px;
}
.enemy-game-close {
  font-size: 3em;
  padding-top: 6px;
  right: 20px;
}

.missions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin: 20px 0;
  justify-content: center;
}

#missions {
  padding-bottom: 20px;
}

#pet-management-card {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  margin-bottom: 4px;
  justify-items: center;
  min-height: auto;
  height: auto;
  overflow: visible;
  padding-bottom: 15px;
}

#full-collect-icons {
  display: flex;
  gap: 4px;
  width: 100%;
  justify-content: center;
  margin-top: 4px;
}

#full-collect-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

#full-pet-collect-btn {
  width: 100%;
}

.event-btn-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.event-subtext {
  font-size: 0.8em;
  color: #555;
  margin-top: 2px;
  user-select: none;
  text-align: center;
}

.btn-subtext {
  font-size: 0.8em;
  display: block;
}

.boss-select-grid {
  display: flex;
  gap: 6px;
  flex-wrap: nowrap;
  justify-content: center;
  margin-bottom: 4px;
  width: 100%;
  overflow-x: auto;
}

.hero-select-btn {
  min-width: 100px;
  cursor: pointer;
}

.hero-select-btn.selected {
  background: #4caf50;
  color: #fff;
}

.boss-slot {
  width: 150px;
  min-height: 150px;
}
.boss-slot select {
  margin-bottom: 0;
  color: #000;
}


.boss-stat-line {
  font-size: 0.8em;
  margin-top: 2px;
  text-align: center;
}
.highlight-stat {
  color: lightgreen;
  font-weight: bold;
}

.boss-select-notice {
  color: #000;
  font-size: 0.8em;
  margin-top: 4px;
}

.mission-slot {
  background: #fff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
  width: 150px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 200px;
  justify-content: space-between;
}
.daily-mission-slot {
  border: 2px solid #4b0082;
  background: #f3e5f5;
  display: none;
}

.daily-mission-slot.wide {
  width: 300px;
  display: none;
}

/* Ocultar sección completa de Daily Missions */
#daily-missions-section,
#daily-missions-card,
#daily-missions-card-2 {
  display: none !important;
}

.build-slot {
  background: #e6ccb3;
  border: 2px solid #8b4513;
  padding: 10px 20px;
  border-radius: 8px;
  width: 560px;
  min-height: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  margin-left: auto;
  margin-right: auto;
  grid-column: 1 / -1;
}
.build-slot select {
  width: 100%;
  min-width: 180px;
  padding: 8px;
  border-radius: 5px;
  margin-bottom: 6px;
}

.build-slot-row {
  display: flex;
  justify-content: center;
  gap: 10px;
  width: 100%;
}

.build-slot-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  width: 180px;
}
.build-slot-item img {
  margin-bottom: 8px;
}

.build-progress {
  display: block;
  margin: 0 auto;
  width: 100%;
  max-width: 600px;
  grid-column: 1 / -1;
}

#build-house-timer {
  text-align: center;
  font-weight: bold;
  grid-column: 1 / -1;
}

#build-house-inline-timer,
.upgrade-inline-timer,
.build-inline-timer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.25em;
  font-size: 0.75rem;
  background: rgba(173, 216, 230, 0.9);
  padding: 2px 4px;
  border-radius: 4px;
  width: max-content;
  pointer-events: auto;
  z-index: 1000;
}

#build-house-inline-timer .timer,
.upgrade-inline-timer .timer,
.build-inline-timer .timer {
  pointer-events: none;
}

.build-inline-timer {
  justify-content: flex-end;
  width: auto;
}

.build-column {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  position: relative;
  padding-bottom: 10px;
}

.build-column .btn {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  text-align: center;
  padding: 6px 12px;
}

.building-hero-row {
  display: flex;
  justify-content: center;
  gap: 6px;
  margin-bottom: 6px;
  grid-column: 1 / -1;
}
.hero-mini {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.75em;
}
.hero-mini .mission-avatar {
  width: 50px;
  height: 50px;
}
.mini-name {
  text-align: center;
}


.mission-slot select {
  width: 100%;
  padding: 6px;
  border-radius: 5px;
  margin-top: 8px;
  margin-bottom: 6px;
}

.mission-title {
  font-weight: bold;
  margin-bottom: 6px;
}

.mission-desc {
  font-size: 0.85em;
  text-align: center;
  margin-bottom: 8px;
  color: #555;
  min-height: 40px;
}

.mission-slot .timer {
  margin-top: 8px;
}

.mission-done {
  margin-top: 8px;
  font-weight: bold;
}

.mission-note {
  font-size: 1em;
  color: #c00;
  margin-top: 4px;
}

.mission-avatar {
  width: 80px;
  height: 80px;
  max-width: 128px;
  max-height: 128px;
  object-fit: cover;
  border-radius: 50%;
  border: 2px solid #ccc;
  margin-top: 4px;
}

.mission-avatar.empty {
  background: #eee;
}

.mission-red {
  border: 2px solid red;
  background: #ffe6e6;
}

.mission-orange {
  border: 2px solid #cc5500;
  background: #ffe8cc;
}

.mission-yellow {
  border: 2px solid #b8860b;
  background: #ffffe0;
}

.mission-green {
  border: 2px solid green;
  background: #e6ffe6;
}

.mission-blue {
  border: 2px solid #00008b;
  background: #e0ffff;
}

.mission-gray {
  border: 2px solid #000;
  background: #d3d3d3;
}

.abilities-column {
  padding-right: 20px;
}

.pet-column {
  align-items: center;
  text-align: center;
  gap: 4px;
  padding-right: 20px;
  position: relative;
  z-index: auto;
  overflow: hidden;
}

.equip-column {
  padding-right: 20px;
  overflow: hidden;
}

.prof-column {
  padding-right: 20px;
}

.equip-grid {
  display: grid;
  grid-template-rows: 1fr 1fr;
  width: 100%;
  height: 100%;
  gap: 6px;
}
.equip-item {
  display: grid;
  grid-template-columns: 1fr 80px;
  align-items: center;
  gap: 4px;
}

.skills-grid {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.skill-line {
  display: grid;
  grid-template-columns: auto 80px;
  align-items: center;
  gap: 6px;
}

.skill-icon {
  width: 40px;
  height: 40px;
  object-fit: cover;
  border-radius: 4px;
  border: 2px solid #ccc;
}

.skill-large-icon {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
  border: 2px solid #ccc;
  background: #eee;
}

.slot-img {
  width: 80px;
  max-width: 160px;
  aspect-ratio: 1 / 1;
  border-radius: 8px;
  border: 2px solid #ccc;
  background: #eee;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  cursor: pointer;
  position: relative;
}

.pet-image-container {
  max-width: 100%;
}

.hero-image-container img,
.villain-image-container img,
.pet-image-container img,
.ability-slot img {
  border: 5px solid var(--yellow-500);
  border-radius: 8px;
  box-sizing: border-box;
}

.profession-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.profession-item button {
  background: none;
  border: none;
  color: #c00;
  font-weight: bold;
  cursor: pointer;
}


.potion-item {
  display: grid;
  grid-template-columns: 1fr auto auto auto;
  align-items: center;
  gap: 4px;
  margin-bottom: 2px;
}
.potion-item button {
  font-size: 0.8em;
}
.hero-drink-btn {
  border: 2px solid purple;
}
.potion-icon {
  cursor: pointer;
  font-size: 1em;
  user-select: none;
}
.potion-plus {
  color: green;
}
.potion-minus {
  color: red;
}

.profession-select {
  width: 100%;
  margin-top: 4px;
  position: relative;
  z-index: 4;
}

.companions {
  display: flex;
  flex-wrap: wrap;
  gap: 7px;
  align-items: flex-start;
  width: 100%;
  padding-left: 10px;
  padding-right: 10px;
  padding-bottom: 20px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
  overflow-x: auto;
  overflow-y: visible;
  box-sizing: border-box;
}
.companion-row {
  display: grid;
  grid-template-columns: repeat(8, minmax(120px, 1fr));
  gap: 7px;
  width: 100%;
  justify-items: center;
  padding-bottom: 15px;
  box-sizing: border-box;
  overflow-x: auto;
  overflow-y: visible;
}

.companion-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  min-width: 120px;
  box-sizing: border-box;
  padding-bottom: 10px;
}

.companion-slot select {
  width: 100%;
  box-sizing: border-box;
  padding: 6px;
  border-radius: 5px;
  margin-top: 8px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.companion-slot select option {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.companion-label {
  font-weight: bold;
  margin-bottom: 4px;
  padding-left: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.companion-circle {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #ccc;
  margin-bottom: 6px;
}

.companions .companion-slot:first-child {
  margin-left: 0;
}

.remove-companion {
  background: none;
  border: none;
  color: #c00;
  font-weight: bold;
  cursor: pointer;
  font-size: 0.8em;
}

.village-chief {
  margin-bottom: 20px;
}


.pagination {
  margin-top: 10px;
  text-align: center;
  padding-bottom: 20px;
}

#hero-pagination {
  padding-bottom: 40px;
}

.pagination > button {
  margin: 0 4px;
  padding: 4px 8px;
  border: none;
  background: #007bff;
  color: white;
  border-radius: 4px;
  cursor: pointer;
}

.pagination > button:disabled {
  background: #999;
  cursor: not-allowed;
}

.chief-command-card {
  background: #fff;
  border-radius: 12px;
  padding: 10px;
  position: relative;
}

.favorite-star {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 18px;
  height: 18px;
  border: 1px solid #ccc;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: transparent;
  font-size: 14px;
  z-index: 6;
}
.favorite-star.selected {
  color: gold;
}

.zoom-icon {
  display: none !important;
}
.zoom-icon.disabled {
  display: none !important;
}
.download-icon {
  position: absolute;
  top: 8px;
  left: 24px;
  width: 18px;
  height: 18px;
  border: 1px solid #ccc;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 14px;
  background: white;
  z-index: 5;
}

.persistent-download-icon {
  position: absolute;
  top: var(--image-badge-offset);
  left: var(--image-badge-offset);
  width: 18px;
  height: 18px;
  border: 1px solid #ccc;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 12px;
  background: white;
  z-index: 6;
  opacity: 0.8;
  transition: opacity 0.2s ease;
}

.persistent-download-icon:hover {
  opacity: 1;
  background: #f0f0f0;
}

.persistent-download-icon.disabled {
  pointer-events: none;
  opacity: 0.3;
}
.download-icon.disabled {
  pointer-events: none;
  opacity: 0.5;
}

/* Add as Hero button (top-right for village chief and partner) */
.add-as-hero-icon {
  position: absolute;
  top: var(--image-badge-offset);
  right: var(--image-badge-offset);
  width: 24px;
  height: 24px;
  border: 2px solid #4CAF50;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  background: #4CAF50;
  color: white;
  z-index: 6;
  opacity: 0.9;
  transition: all 0.2s ease;
}

.add-as-hero-icon:hover {
  opacity: 1;
  background: #45a049;
  transform: scale(1.1);
}

.add-as-hero-icon.disabled {
  background: #999;
  border-color: #999;
  cursor: not-allowed;
  opacity: 0.5;
  pointer-events: none;
}

.add-as-hero-icon.disabled:hover {
  background: #999;
  transform: none;
}

/* Add as Hero button (bottom-right for familiars) */
.add-as-hero-icon-familiar {
  position: absolute;
  bottom: var(--image-badge-offset);
  right: var(--image-badge-offset);
  width: 24px;
  height: 24px;
  border: 2px solid #4CAF50;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  background: #4CAF50;
  color: white;
  z-index: 6;
  opacity: 0.9;
  transition: all 0.2s ease;
}

.add-as-hero-icon-familiar:hover {
  opacity: 1;
  background: #45a049;
  transform: scale(1.1);
}

.add-as-hero-icon-familiar.disabled {
  background: #999;
  border-color: #999;
  cursor: not-allowed;
  opacity: 0.5;
  pointer-events: none;
}

.add-as-hero-icon-familiar.disabled:hover {
  background: #999;
  transform: none;
}

/* Population Tabs Styles */
.population-tabs {
  display: flex;
  gap: 8px;
  margin: 16px 0;
  padding: 8px;
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(160, 82, 45, 0.05));
  border: 2px solid rgba(139, 69, 19, 0.4);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.population-tab {
  flex: 1;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: bold;
  font-family: 'Cinzel', serif;
  background: linear-gradient(145deg, var(--brown-700), #4a2a1a);
  color: var(--parchment-100);
  border: 2px solid rgba(139, 69, 19, 0.6);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 6px 20px rgba(0,0,0,0.19);
}

.population-tab:hover {
  filter: brightness(1.1);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

.population-tab.active {
  background: linear-gradient(145deg, var(--yellow-500), var(--yellow-600));
  color: #2a2a2a;
  border-color: var(--yellow-600);
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3), 0 6px 12px rgba(0,0,0,0.3);
}

.population-tab:active {
  transform: translateY(0);
}

#population-content {
  margin-top: 20px;
}

/* Productivity Tabs Styles (similar a Population) */
.productivity-tabs {
  display: flex;
  gap: 8px;
  margin: 16px 0;
  padding: 8px;
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(160, 82, 45, 0.05));
  border: 2px solid rgba(139, 69, 19, 0.4);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
.productivity-tab {
  flex: 1;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: bold;
  font-family: 'Cinzel', serif;
  background: linear-gradient(145deg, var(--brown-700), #4a2a1a);
  color: var(--parchment-100);
  border: 2px solid rgba(139, 69, 19, 0.6);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 6px 20px rgba(0,0,0,0.19);
}
.productivity-tab:hover { filter: brightness(1.1); transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.3); }
.productivity-tab.active { background: linear-gradient(145deg, var(--yellow-500), var(--yellow-600)); color: #2a2a2a; border-color: var(--yellow-600); box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3), 0 6px 12px rgba(0,0,0,0.3); }
.productivity-tab:active { transform: translateY(0); }

#productivity-content { margin-top: 20px; }

/* Modern Control Panel Styles */
.hero-controls {
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.1), rgba(160, 82, 45, 0.05));
  border: 2px solid rgba(139, 69, 19, 0.4);
  border-radius: 12px;
  padding: 2px 12px;
  margin: 8px 0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(2px);
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
  box-sizing: border-box;
  overflow: visible;
  justify-content: center;
  align-items: center;
}


.hero-controls-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
  justify-content: center;
  width: 100%;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 4px;
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 6px;
  border-radius: 6px;
  border: 1px solid rgba(139, 69, 19, 0.2);
  flex-shrink: 0;
  box-sizing: border-box;
  margin: 0;
}

.control-group label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 500;
  color: #8B4513;
  cursor: pointer;
  white-space: nowrap;
}

.control-group input[type="checkbox"] {
  width: 16px;
  height: 16px;
  border-radius: 4px;
  border: 2px solid #8B4513;
  background: rgba(255, 255, 255, 0.9);
  cursor: pointer;
  transition: all 0.2s ease;
}

.control-group input[type="checkbox"]:checked {
  background: #8B4513;
  border-color: #8B4513;
}

.control-group input[type="checkbox"]:checked::after {
  content: '';
  color: white;
  font-weight: bold;
  display: block;
  text-align: center;
  line-height: 12px;
  font-size: 10px;
}

/* Styled select elements */
.control-group select {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(139, 69, 19, 0.3);
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 0.85em;
  color: #8B4513;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 80px;
  max-width: 120px;
}

.control-group select:hover {
  border-color: #8B4513;
  box-shadow: 0 2px 4px rgba(139, 69, 19, 0.2);
}

.control-group select:focus {
  outline: none;
  border-color: #8B4513;
  box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
}

/* Styled search input */
.control-group input[type="text"] {
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(139, 69, 19, 0.3);
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 0.85em;
  color: #8B4513;
  transition: all 0.2s ease;
  min-width: 120px;
  max-width: 180px;
}

.control-group input[type="text"]:hover {
  border-color: #8B4513;
  box-shadow: 0 2px 4px rgba(139, 69, 19, 0.2);
}

.control-group input[type="text"]:focus {
  outline: none;
  border-color: #8B4513;
  box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
}

/* Small sort buttons for Order by sections */
.hero-controls .btn.btn-green {
  font-size: 0.85em;
  padding: 4px 8px;
  margin: 0 1px;
  min-height: auto;
  line-height: 1.2;
  border-radius: 4px;
  transition: all 0.2s ease;
  border: 1px solid rgba(139, 69, 19, 0.3);
}

.hero-controls .btn.btn-green:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(139, 69, 19, 0.3);
}

.hero-controls .btn.btn-green:disabled {
  background: #8B4513;
  border-color: #8B4513;
  color: white;
  font-weight: bold;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

.hero-controls span[style*="font-weight: bold"] {
  font-size: 0.9em;
  line-height: 1.2;
  display: inline-flex;
  align-items: center;
  color: #8B4513;
  font-weight: 600;
}

/* Icons for visual enhancement */
.control-group::before {
  content: attr(data-icon);
  font-size: 1.1em;
  margin-right: 4px;
}

/* Section titles with medieval styling */
section h1 {
  background: linear-gradient(135deg, rgba(139, 69, 19, 0.2), rgba(160, 82, 45, 0.1));
  border: 2px solid rgba(139, 69, 19, 0.4);
  border-radius: 8px;
  padding: 12px 20px;
  margin: 16px 0 8px 0;
  color: #8B4513;
  font-weight: bold;
  text-align: center;
  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.2);
  position: relative;
}

section h1::before {
  content: "⚔️";
  margin-right: 8px;
  font-size: 1.2em;
}

#heroes-section h1::before {
  content: "🧙";
}

#villain-section h1::before {
  content: "👹";
}

#pets-section h1::before {
  content: "🐾";
}

/* Info panel styling */
.info-panel {
  background: linear-gradient(135deg, rgba(128, 0, 128, 0.1), rgba(75, 0, 130, 0.05));
  border: 2px solid rgba(128, 0, 128, 0.3);
  border-radius: 8px;
  padding: 16px;
  margin: 0;
  box-shadow: 0 4px 12px rgba(128, 0, 128, 0.2);
  backdrop-filter: blur(2px);
  display: none;
  min-height: 200px;
  width: calc(100% + 30px);
  box-sizing: border-box;
  position: relative;
}

.info-panel.expand-row {
  display: block;
}

.info-panel .close-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  background: rgba(128, 0, 128, 0.8);
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  color: white;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.info-panel .close-btn:hover {
  background: rgba(128, 0, 128, 1);
  transform: scale(1.1);
}

/* Remove filter button styling */
#remove-filter-btn {
  font-size: 0.8em;
  padding: 4px 8px;
  margin-left: 8px;
  background: #dc3545;
  border-color: #dc3545;
  color: white;
}

#remove-filter-btn:hover {
  background: #c82333;
  border-color: #bd2130;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .hero-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .control-group {
    justify-content: center;
  }
  
  section h1 {
    font-size: 1.1em;
    padding: 8px 16px;
  }
}

/* Show only download icon in top-left for downsized images */
.hero-image-container .download-icon,
.hero-second-image .download-icon,
.ability-image-1 .download-icon,
.ability-image-2 .download-icon,
.villain-image-container .download-icon {
  left: 4px !important;
  top: 4px !important;
}

.pet-image-container .download-icon {
  left: 4px !important;
  top: 4px !important;
  width: 14px;
  height: 14px;
  font-size: 10px;
}

.hero-image-container .zoom-icon,
.hero-second-image .zoom-icon,
.ability-image-1 .zoom-icon,
.ability-image-2 .zoom-icon,
.villain-image-container .zoom-icon {
  display: none !important;
}

.equip-grid .zoom-icon,
.equip-grid .download-icon {
  top: 4px;
  width: 14px;
  height: 14px;
  font-size: 10px;
}

.equip-grid .zoom-icon { left: 4px; }
.equip-grid .download-icon { left: 22px; }

.slot-number {
  position: absolute;
  top: var(--image-badge-offset);
  right: var(--image-badge-offset);
  background: rgba(0,0,0,0.6);
  color: #fff;
  font-size: 12px;
  padding: 1px 4px;
  border-radius: 3px;
  z-index: 6;
}

.move-icon {
  display: none !important;
}
.move-up {
  display: none !important;
}
.move-down {
  display: none !important;
}
.move-left {
  display: none !important;
}
.move-right {
  display: none !important;
}

.scroll-wrapper {
  position: relative;
}

.timeline {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 2px;
  z-index: 5;
}
.timeline-dot {
  cursor: pointer;
  font-size: 28px;
  line-height: 30px;
  color: #fff;
}
.timeline-dot.active {
  font-weight: bold;
  color: #333;
}

.hero-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 10px;
  width: 100%;
  justify-content: space-between;
  align-items: center;
}
.hero-controls > * {
  flex: 1 1 50px;
}
.hero-controls label {
  display: flex;
  align-items: center;
}

.hero-controls select {
  padding: 6px;
  border-radius: 5px;
}
.hero-controls button,
#pet-controls button,
#villain-controls button {
  color: #fff;
  white-space: nowrap;
}

@media (max-width: 600px) {
  .hero-controls {
    flex-wrap: wrap;
    justify-content: center;
  }

  .hero-controls > * {
    flex: 1 1 45%;
  }

  .hero-controls label,
  .hero-controls select,
  .hero-controls button {
    width: 100%;
  }
}


.modal-overlay {
  position: fixed;
  inset: 0;
  background: transparent !important;
  display: grid;
  place-items: center;
  z-index: 9999;
  opacity: 0;
  animation: fade-in 0.25s ease forwards;
}

.modal-overlay.card-modal {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
}

.modal {
  width: min(520px, 92vw);
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
  padding: 16px 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
}

.modal.boss-modal {
  width: min(960px, 95vw);
  min-height: 320px;
}

.body--lock-scroll {
  overflow: visible !important;
}

.hero-list {
  height: 420px;
  overflow: auto;
  position: relative;
}

.hero-list .row {
  height: 56px;
  line-height: 56px;
}

.hero-list img {
  width: 32px;
  height: 32px;
  object-fit: cover;
}

.hidden {
  display: none;
}

.sy-modal-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  background: rgba(0, 0, 0, 0.4);
  z-index: 9999;
}

.sy-modal {
  max-width: 520px;
  width: 100%;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
  outline: none;
}

/* Global fixed modal without overlay */
.fixed-modal {
  position: fixed;
  top: 50vh;
  left: 50vw;
  transform: translate(-50%, -50%);
  z-index: 10000;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,.2);
  padding: 16px 20px;
  margin: 0;
  max-width: min(520px, 92vw);
}

/* Layout helpers to avoid column overlap */
.hero-row,
.stats-columns {
  display: grid;
  gap: 16px;
}

.hero-row > *,
.stats-columns > * {
  min-width: 0;
}

.hero-col-abilitiesimg,
.hero-col-pet {
  position: relative;
  overflow: hidden;
  z-index: 0;
}

.ability-slot {
  width: var(--slot-size);
  height: var(--slot-size);
  display: grid;
  place-items: center;
  border-radius: 8px;
  overflow: visible;
}

.pet-box {
  width: var(--slot-size);
  height: var(--slot-size);
  display: block;
}

.pet-box img,
.pet-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.hero-col-pet {
  position: relative !important;
  left: 0 !important;
  margin-left: 0 !important;
  transform: none !important;
}

.equip-item {
  grid-template-columns: 1fr var(--slot-size);
}

.skill-line {
  grid-template-columns: auto var(--slot-size);
}

.sy-modal__title {
  margin: 16px 16px 0;
  font-size: 18px;
  font-weight: 700;
}

.sy-modal__content {
  padding: 16px;
}

.sy-modal__actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  padding: 0 16px 16px;
}

.zoom-overlay img {
  max-width: 500px;
  max-height: 500px;
  border-radius: 8px;
}

.zoom-top-bar {
  position: absolute;
  top: 4px;
  right: 4px;
  display: flex;
  gap: 6px;
}


/* Fortune wheel styles */
.wheel-container {
  position: relative;
  width: 400px;
  height: 400px;
  margin: auto;
}
.wheel-container canvas {
  border-radius: 50%;
  background: white;
}
.pointer {
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-top: 40px solid red;
  position: absolute;
  top: -40px;
  left: 50%;
  transform: translateX(-50%);
}
.spin-btn {
  display: block;
  width: fit-content;
  margin: 10px auto 0;
  padding: 8px 16px;
}
.enemy-game-container {
  display: flex;
  justify-content: center;
  align-items: center;
  max-height: 600px;
  width: 100%;
  max-width: 100%;
  background: linear-gradient(-45deg, #f3ec78, #af4261, #70e1f5, #ffd194);
  background-size: 600% 600%;
  animation: backgroundAnim 18s ease infinite;
  position: relative;
}

.enemy-game-container canvas {
  width: 100%;
  height: 100%;
}

.html-game-frame {
  width: 100%;
  height: 600px;
  border: none;
}

#game-state-display {
  margin: 10px 0;
  font-weight: bold;
}

.boss-rush-card {
  background: #fff;
  color: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px;
  padding-bottom: 30px;
  position: relative;
}

.boss-rush-container {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  max-width: 100%;
  background: #000;
  position: relative;
  min-height: 400px;
}

.boss-rush-container canvas {
  width: 100%;
  height: 100%;
  max-width: 800px;
  background: #000;
}

#games-card {
  min-height: 60px;
  display: flex;
  align-items: center;
  gap: 10px;
}

#games-buttons-card {
  min-height: 90px;
}


.shop-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  height: 100%;
}

.shop-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 6px;
  height: 100%;
}
#village-section {
  position: relative;
}

#village-section .chief-card {
  min-height: 90px;
}

#build-house-card {
  grid-template-columns: repeat(8, 1fr);
  padding-bottom: 10px;
}

#build-house-card button {
  min-height: 50px;
  width: 100%;
}

@media (max-width: 1000px) {
  #build-house-card {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 600px) {
  #build-house-card {
    grid-template-columns: repeat(2, 1fr);
  }
}

#village-overview-card {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 0;
  padding: 10px 5px;
  width: 100%;
}

@media (max-width: 1000px) {
  #village-overview-card {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 600px) {
  #village-overview-card {
    grid-template-columns: repeat(2, 1fr);
  }
}

.overview-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  font-size: 1em;
  width: 100%;
  min-width: 0;
  max-width: none;
}

@media (max-width: 1000px) {
  .overview-item {
    flex: 0 0 calc(25% - 10px);
  }
}

@media (max-width: 600px) {
  .overview-item {
    flex: 0 0 calc(50% - 10px);
  }
}

.overview-item .icon {
  font-size: 1.5em;
}

#village-chief-section .chief-card {
    grid-template-columns: 360px 1fr 1fr;
}
#village-chief-section .info-section .btn,
#village-chief-section .chief-action-col .btn {
  width: 100%;
  min-width: 0;
}
#village-chief-section .partner-slot .btn {
  max-width: 200px;
  width: 100%;
}
#village-chief-section .btn {
}


.boss-rush-top {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 6px;
  width: 100%;
  position: relative;
}

.boss-middle {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.boss-heroes {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.sound-btn {
  position: absolute;
  left: 10px;
  width: auto;
  padding: 4px 8px;
}

.hero-info {
  text-align: center;
  font-size: 0.8em;
  color: #000;
}
.hero-info .hero-icon {
  font-size: 1.2em;
}
.hero-info .stat {
  font-size: 0.7em;
}

.boss-label {
  text-align: center;
  font-weight: bold;
  color: #000;
  margin-bottom: 4px;
  white-space: nowrap;
}

.boss-health {
  width: 100%;
  background: #444;
  height: 20px;
  border-radius: 5px;
  overflow: hidden;
  margin: 0 auto 8px auto;
  position: relative;
}

.boss-health-fill {
  background: #cc0000;
  height: 100%;
  width: 100%;
}

.boss-health-text {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 0.8em;
  pointer-events: none;
}

.boss-timer {
  position: absolute;
  left: 50%;
  bottom: 10px;
  transform: translateX(-50%);
  font-size: 1.4em;
  font-weight: bold;
  color: white;
}

@keyframes backgroundAnim {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.enemy-message {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 2em;
  color: white;
  font-weight: bold;
  text-shadow: 0 0 5px #fff;
}
.fortune-result {
  margin-top: 10px;
  font-weight: bold;
}

/* Life missions styles */
.tasks-grid {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
}
.column {
  display: flex;
  flex-direction: column;
  gap: 15px;
}
#life-gold-display {
  text-align: left;
  font-weight: bold;
  font-size: 1.2em;
}

#life-other-task {
  width: 450px;
  max-width: 90%;
  height: 60px;
  display: block;
  margin: 10px auto;
  padding: 8px;
  resize: vertical;
  font-size: 14px;
}
.task {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  padding: 10px;
  width: 300px;
  border-radius: 8px;
  box-shadow: 0 0 5px rgba(0,0,0,0.1);
}
.task input[type="text"] {
  width: 45%;
  padding: 5px;
  font-size: 14px;
}
.task select {
  padding: 5px;
}
.task input[type="checkbox"] {
  transform: scale(1.3);
}
.reset-btn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.4em;
  cursor: pointer;
}
.easy { background-color: #d4fcd4; }
.normal { background-color: #d4e9fc; }
.hard { background-color: #fcd4d4; }

.app {
  display: flex;
  flex-wrap: nowrap;
  gap: 20px;
  flex: 1 1 auto;
}

.sidebar {
  display: flex;
  flex-direction: column;
  background: white;
  border-radius: 12px;
  padding: 5px;
  margin-left: -10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  max-height: 100vh;
  overflow-y: auto;
}

.sidebar button {
  width: 80px;
  height: 80px;
  margin-bottom: 5px;
  border: none;
  border-radius: 12px;
  background: var(--parchment-100);
  color: #000;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  transition: transform 0.1s;
}
.sidebar button:disabled {
  background: #999;
  color: #666;
  cursor: not-allowed;
  transform: none;
}
.sidebar button.small-text {
  font-size: 0.8em;
}

.sidebar button:hover {
  transform: scale(1.05);
}

.sidebar button.active {
  background: var(--parchment-100);
  color: #000;
  box-shadow: 0 0 0 2px var(--yellow-500) inset;
}

/* Sidebar submenu (productivity) */
.sidebar-submenu {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 5px;
}
.sidebar-submenu > .submenu-toggle {
  width: 80px;
  height: 32px;
  border: none;
  border-radius: 8px;
  background: var(--yellow-500);
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}
.sidebar-submenu > .submenu-toggle[aria-expanded="true"] {
  filter: brightness(0.95);
}
.sidebar-submenu > .submenu {
  display: grid;
  grid-template-columns: 1fr;
  gap: 4px;
}
.sidebar-submenu .submenu-item {
  width: 80px;
  height: 36px;
  border: none;
  border-radius: 8px;
  background: var(--parchment-100);
  color: #000;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.sidebar-submenu .submenu-item:hover {
  transform: scale(1.03);
}

@media (max-width: 600px) {
  .sidebar-submenu > .submenu-toggle {
    width: auto;
    height: 40px;
  }
  .sidebar-submenu .submenu-item {
    width: auto;
    height: 40px;
  }
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  gap: 4px;
  margin-bottom: 8px;
}
.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  text-align: center;
  margin-bottom: 4px;
  font-weight: bold;
}
.calendar-day {
  position: relative;
  aspect-ratio: 1 / 1;
  background: #eee;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.empty-day {
  background: transparent;
  cursor: default;
}
.calendar-day.locked {
  background: #bbb;
  cursor: default;
  pointer-events: auto;
}
.calendar-day-num {
  position: absolute;
  top: 2px;
  right: 4px;
  font-size: 0.75em;
}
.calendar-event-bell-wrap {
  position: absolute;
  top: 10px;
  right: 4px;
  width: 32px;
  height: 32px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}
.calendar-event-bell {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5em;
  filter: grayscale(100%);
  color: #888;
  pointer-events: none;
}
.calendar-event-bell.has-event {
  filter: none;
  color: gold;
}
.calendar-day.locked .calendar-event-bell-wrap {
  pointer-events: auto;
}
.calendar-icons {
  position: absolute;
  top: 18px;
  bottom: 20px;
  left: 2px;
  right: 2px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  font-size: 1.3em;
}
.daily-stats {
  position: absolute;
  bottom: 2px;
  left: 2px;
  right: 2px;
  text-align: center;
  font-size: 1em;
  line-height: 1em;
  pointer-events: none;
}
.icon-row {
  display: flex;
  justify-content: space-around;
  width: 100%;
}
.diary-icon {
  color: #ff9800;
}
.other1-icon {
  color: #c62828;
}
.other2-icon {
  color: #1565c0;
}
.diary-icon {
  color: #ff9800;
}
.other1-icon {
  color: #c62828;
}
.other2-icon {
  color: #1565c0;
}
.calendar-title {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  text-align: center;
}
.calendar-arrow {
  cursor: pointer;
}
.calendar-arrow.disabled {
  opacity: 0.5;
  pointer-events: none;
}

#boss-familiars {
  padding-right: 30px;
  padding-top: 20px;
}

.familiars-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 3px;
  justify-items: stretch;
}

.familiar-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  position: relative;
  width: 100%;
  margin: 0;
  padding: 0;
}
.locked {
  pointer-events: none;
  opacity: 0.5;
}
.locked-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.5);
  color: white;
  font-weight: bold;
}

.familiar-img {
  width: 100%;
  height: 320px;
  max-width: none;
  max-height: none;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
}

.habilities-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 3px;
  justify-items: stretch;
}

#boss-habilities {
  padding-right: 30px;
  padding-top: 20px;
}

#partner-abilities {
  padding-right: 30px;
  padding-top: 20px;
}

.hability-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  position: relative;
  width: 100%;
  margin: 0;
  padding: 0;
}

.hability-img {
  width: 100%;
  height: 320px;
  max-width: none;
  max-height: none;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
}

.ability-image {
  width: 160px;
  height: 160px;
  max-width: none;
  max-height: none;
  object-fit: cover;
}

.partner-slot {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  width: 100%;
  position: relative;
}
.partner-name {
  text-align: center;
  font-weight: bold;
}
.partner-level {
  text-align: center;
  font-size: 0.9em;
}
.partner-slot .avatar {
  object-fit: cover;
  display: block;
}
.partner-slot .avatar-wrap {
  width: 100%;
  aspect-ratio: 1 / 1;
}
.partner-slot .chief-avatar {
  width: 100%;
  height: 100%;
  border: 2px solid #d4af37;
  box-sizing: border-box;
}
.partner-slot .btn {
  max-width: 200px;
  width: 100%;
}

.building-img {
  width: 100%;
  height: auto;
  max-width: 600px;
  align-self: center;
  object-fit: contain;
  grid-column: 1 / -1;
}

.content {
  flex: 1 1 300px;
  overflow-x: auto;
  overflow-y: auto;
  min-width: 0;
}

@media (max-width: 600px) {
  .app {
    flex-direction: column;
  }

  .sidebar {
    flex-direction: row;
    justify-content: space-around;
    margin: 0 0 10px 0;
    gap: 5px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .sidebar button {
    flex: 1 1 auto;
    width: auto;
    height: 40px;
    margin: 0;
  }

  .header {
    flex-direction: column;
    align-items: stretch;
  }

  .header-button {
    width: 100%;
  }

  #pets-section .pet-card {
    grid-template-columns: 120px auto;
  }

  #village-chief-section .chief-card {
    grid-template-columns: 1fr;
  }
  .chief-avatar {
    width: 134px;
    height: 134px;
    margin: 0 auto;
  }

  .partner-slot .avatar-wrap {
    width: 100%;
    aspect-ratio: 1 / 1;
  }
  .partner-slot .chief-avatar {
    width: 100%;
    height: 100%;
    border: 2px solid #d4af37;
    box-sizing: border-box;
  }
  .partner-slot {
    width: 100%;
    position: relative;
  }
  .partner-slot .btn {
    max-width: 120px;
  }

  .familiars-grid,
  .habilities-grid {
    display: flex;
    overflow-x: auto;
  }

  .familiar-img,
  .hability-img,
  .ability-image {
    height: 160px;
  }

}

#tutorial-section .chief-card, #settings-section .chief-card { min-height: 0; display: block; }
#tutorial-buttons {
  display: flex;
  align-items: flex-start;
}
#tutorial-buttons button {
  width: 25%;
  margin: 0;
}
#tutorial-section .btn { color: #fff; }
#acumulated-level-table-btn {
  margin-top: 4px;
}
#next-level-table-card, #acumulated-level-table-card { max-height: 400px; overflow-y: auto; }
.level-table-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
.level-table-container table { width: 100%; }

#tutorial-info-card {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 8px;
  margin-top: 8px;
}

.tutorial-info-item strong {
  display: block;
  margin-bottom: 2px;
}

#sound-card {
  padding: 10px;
}

/* Custom scrollbar for dark medieval theme */
::-webkit-scrollbar {
  width: 12px;
  background-color: #2b1d0e;
}

::-webkit-scrollbar-track {
  background-color: #2b1d0e;
}

::-webkit-scrollbar-thumb {
  background-color: #8b5e3c;
  border-radius: 6px;
  border: 2px solid #2b1d0e;
}

::-webkit-scrollbar-thumb:hover {
  background-color: #a07953;
}

/* show arrows */
::-webkit-scrollbar-button {
  height: 16px;
  background-color: #8b5e3c;
  border: 2px solid #2b1d0e;
}

::-webkit-scrollbar-button:hover {
  background-color: #a07953;
}

/* --- Mejorar scroll fluido y rendimiento general --- */
html, body {
  overflow-y: auto;
  scroll-behavior: smooth;
  contain: layout style paint;
  will-change: transform;
}

/* --- Compact Music Player --- */
.mini-player{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:#222; background:#f7f0df;
  border:1px solid #d8c9a7; border-radius:10px;
  padding:4px 8px; gap:4px; box-sizing:border-box; width:100%;
  display:flex; flex-direction:column; align-items:center;
}

/* Reproductor fijo en esquina superior derecha */
#chiefMusicSlot {
  position: fixed !important;
  top: 20px;
  right: 20px;
  width: 400px;
  z-index: 1000;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
}

/* Estado minimizado del reproductor */
#chiefMusicSlot.minimized {
  width: auto;
}

#chiefMusicSlot.minimized .mini-player {
  width: auto;
  padding: 4px 8px;
}

#chiefMusicSlot.minimized .mini-player .controls-row,
#chiefMusicSlot.minimized .mini-player .progress-row {
  display: none;
}

#chiefMusicSlot.minimized .mini-player .manage-row {
  justify-content: center;
  gap: 0;
  width: auto;
}

#chiefMusicSlot.minimized .mini-player .manage-row button:not(#sywMinimize) {
  display: none;
}

#chiefMusicSlot.minimized .mini-player .manage-row #sywMinimize {
  display: block;
  margin-left: 0;
}

/* Estado minimizado - mostrar solo emoji y botón + */
#chiefMusicSlot.minimized .mini-player .manage-row .music-emoji {
  display: inline-block;
  margin-right: 0;
}
.mini-player .manage-row{ display:flex; justify-content:center; align-items:center; gap:8px; width:100%; }
.mini-player .music-emoji{ font-size:16px; margin-right:4px; }
.mini-player .controls-row{ display:grid; grid-template-columns:auto 1fr; align-items:center; gap:8px; width:100%; }
.mini-player .controls{ display:inline-flex; align-items:center; gap:6px; white-space:nowrap; }
.mini-player .progress-row{ display:flex; align-items:center; gap:8px; width:100%; justify-content:center; }
.mini-player .progress-row span{ font-size:12px; }
.mini-player .progress-row input[type=range]{
  flex:1; -webkit-appearance:none; height:4px; background:#d8c9a7;
  border-radius:2px; cursor:pointer;
}
.mini-player .progress-row input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none; width:10px; height:10px; border-radius:50%; background:#000;
}
.mini-player .progress-row input[type=range]::-moz-range-thumb{
  width:10px; height:10px; border-radius:50%; background:#000; border:none;
}
.mini-player button{
  appearance:none; border:1px solid #d8c9a7; background:#eee2c7;
  border-radius:999px; height:28px; min-width:28px; padding:0 8px;
  font-size:13px; line-height:26px; cursor:pointer;
}
.mini-player button:hover{ background:#e7d7b6; }
.title-wrap{ display:flex; align-items:center; height:28px; overflow:hidden; }
.title{ font-size:13px; color:#222; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; width:100%; }


.sex-badge {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 18px;
  height: 18px;
  border: 1px solid #ccc;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-weight: bold;
  font-size: 14px;
  line-height: 1;
  background: white;
  user-select: none;
  z-index: 5;
}
.sex-badge.male   { color: blue; }
.sex-badge.female { color: deeppink; }
.sex-badge.neutral{ color: gray; }

.hero-card {
  position: relative;
}

.sex-popup {
  position: absolute;
  z-index: 9999;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 10px 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  width: 180px;
}
.sex-popup .option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
}
.sex-popup .option:hover {
  background: #f3f3f3;
}

.sex-popup .icon {
  font-weight: bold;
}
.sex-popup .icon.male { color: blue; }
.sex-popup .icon.female { color: deeppink; }
.sex-popup .icon.neutral { color: gray; }

 #special-builder-assignment {
  position: relative;
}

#special-builder-assignment .builder-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.special-builder-card {
  padding: 16px;
  text-align: center;
}

.builder-avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 2px solid #999;
  margin: 8px auto;
  background: #ccc center/cover no-repeat;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 64px;
}

.builder-name {
  margin-bottom: 8px;
  font-weight: bold;
}

.builder-completed-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  align-items: center;
  margin-top: 8px;
}

.builder-completed-grid .builder-name {
  margin-bottom: 0;
}

.builder-modal-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
}

.builder-modal {
  background: #fff;
  border-radius: 12px;
  padding: 16px;
  max-width: min(520px, 92%);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.builder-modal-title {
  margin: 0 0 8px 0;
  font-size: 1.1em;
  font-weight: 600;
  color: #2c3e50;
}

.builder-form-group {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
}

.builder-label {
  font-weight: 500;
  color: #34495e;
  white-space: nowrap;
  min-width: fit-content;
}

.builder-select {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid #bdc3c7;
  border-radius: 4px;
  font-size: 14px;
  background: #fff;
}

.builder-select:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
}

.builder-modal-buttons {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 12px;
}

/* Mobile responsiveness */
@media (max-width: 420px) {
  .builder-modal {
    padding: 12px;
    gap: 8px;
  }
  
  .builder-form-group {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }
  
  .builder-label {
    margin-bottom: 2px;
  }
  
  .builder-modal-buttons {
    margin-top: 8px;
  }
}

#group-mission-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
}
.group-card {
  position: relative;
  border: 1px solid #333;
  border-radius: 12px;
  padding: 12px;
  background: rgba(20,20,20,.85);
  color: #fff;
}
.group-card h3 { margin: 0 0 6px; }
.group-desc { font-size: 12px; opacity: .9; margin-bottom: 8px; min-height: 30px; }
.hero-slots { display: grid; grid-template-columns: 1fr; gap: 8px; }
.hero-slots select { width: 100%; }
.group-footer { margin-top: 10px; display: flex; gap: 8px; align-items: center; }
.group-status { font-weight: 700; }
.group-x {
  position: absolute; bottom: 8px; right: 8px; cursor: pointer;
  color: #ff4d4f; font-weight: 900; font-size: 18px; user-select: none;
}
.group-muted { opacity: .6; }

/* Special Units System Animations */
@keyframes cardReveal {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.8) rotateX(90deg);
  }
  50% {
    opacity: 0.7;
    transform: translateY(15px) scale(0.9) rotateX(45deg);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1) rotateX(0deg);
  }
}

.btn-gold {
  background-color: #ffd700 !important;
  color: #000 !important;
  border: 2px solid #ffa500 !important;
  font-weight: bold !important;
}

.btn-gold:hover {
  background-color: #ffed4e !important;
  transform: scale(1.05);
}

.btn-gold:disabled {
  background-color: #ccc !important;
  color: #666 !important;
  border-color: #999 !important;
  transform: none !important;
}
